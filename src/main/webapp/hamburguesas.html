<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Hamburguesas</title>
    <script>
        async function obtenerHamburguesas(filtro = '') {
            try {
                fetch("/webapp-1.0-SNAPSHOT/control?action=getHamburguesasJSON&filtro=" + filtro)
                  .then(r => r.text())
                  .then(console.log)
                  .catch(console.error);
                const data = await response.json();
                const hamburguesasContainer = document.getElementById('hamburguesas-list');
                hamburguesasContainer.innerHTML = '';

                if (data.length > 0) {
                    data.forEach(hamburguesa => {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `
                            <strong>${hamburguesa.nombre}</strong> - ${hamburguesa.descripcion || ''}
                            <form action="/control" method="post" style="margin-top: 10px;">
                                <input type="hidden" name="action" value="addToCart">
                                <input type="hidden" name="idProducto" value="${hamburguesa.id}">
                                <input type="hidden" name="tipoProducto" value="hamburguesa">
                                <button type="submit">Add to cart for: $${hamburguesa.precio}</button>
                            </form>
                        `;
                        hamburguesasContainer.appendChild(listItem);
                    });
                } else {
                    hamburguesasContainer.innerHTML = '<p>No hamburgers available.</p>';
                }
            } catch (error) {
                console.error('Error fetching hamburgers:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', () => obtenerHamburguesas());

        function filtrarHamburguesas(filtro) {
            obtenerHamburguesas(filtro);
        }
    </script>
</head>
<body>
<h1>Burgers</h1>

<div id="hamburguesas-list"></div>

<h2>Filter burgers by type:</h2>
<button onclick="filtrarHamburguesas('premium')">Premium</button>
<button onclick="filtrarHamburguesas('spicy')">Spicy</button>
<button onclick="filtrarHamburguesas('chicken')">Chicken</button>
<button onclick="filtrarHamburguesas('')">All Burgers</button>


<button onclick="window.location.href = 'index.html'" style="margin-top: 10px;">Return to Home Page</button>

<button onclick="window.location.href = 'carrito.html'" style="margin-top: 10px;">Cart</button>
</body>
</html>
