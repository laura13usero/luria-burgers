<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Hamburguesas</title>
    <script>
        // Funci칩n para obtener hamburguesas con AJAX
        function obtenerHamburguesas(filtro = '') {
            fetch(`/control?action=hamburguesas&filtro=${filtro}`)
                .then(response => response.json())
                .then(data => {
                    const hamburguesasContainer = document.getElementById('hamburguesas-list');
                    hamburguesasContainer.innerHTML = '';

                    if (data.length > 0) {
                        data.forEach(hamburguesa => {
                            const listItem = document.createElement('li');
                            listItem.innerHTML = `
                                <strong>${hamburguesa.nombre}</strong> - ${hamburguesa.descripcion ? hamburguesa.descripcion : ''}
                                <form action="/control" method="post" style="margin-top: 10px;">
                                    <input type="hidden" name="action" value="addToCart">
                                    <input type="hidden" name="idProducto" value="${hamburguesa.id}">
                                    <input type="hidden" name="tipoProducto" value="hamburguesa">
                                    <button type="submit">Add to cart for: $${hamburguesa.precio}</button>
                                </form>
                            `;
                            hamburguesasContainer.appendChild(listItem);
                        });
                    } else {
                        hamburguesasContainer.innerHTML = '<p>No hamburgers available.</p>';
                    }
                })
                .catch(error => console.error('Error fetching hamburgers:', error));
        }

        // Cargar hamburguesas al iniciar la p치gina
        document.addEventListener('DOMContentLoaded', function() {
            obtenerHamburguesas(); // Obtener todas las hamburguesas
        });

        // Funci칩n para filtrar hamburguesas
        function filtrarHamburguesas(filtro) {
            obtenerHamburguesas(filtro);
        }
    </script>
</head>
<body>
    <h1>Burgers</h1>

    <div id="hamburguesas-list"></div>

    <h2>Filter burgers by type:</h2>
    <button onclick="filtrarHamburguesas('premium')">Premium</button>
    <button onclick="filtrarHamburguesas('spicy')">Spicy</button>
    <button onclick="filtrarHamburguesas('chicken')">Chicken</button>
    <button onclick="filtrarHamburguesas('')">All Burgers</button>

    <form action="/index.html" method="get" style="margin-top: 20px;">
        <button type="submit">Return to Home Page</button>
    </form>

    <!-- Bot칩n de ver carrito -->
    <form action="/control" method="get" style="margin-top: 10px;">
        <input type="hidden" name="action" value="verCarrito">
        <button type="submit">Cart</button>
    </form>
</body>
</html>
